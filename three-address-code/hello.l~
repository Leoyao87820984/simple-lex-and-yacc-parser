%{
#include <stdio.h>
#include <string.h>
#include "y.tab.h"

char identifier[50][50];
int total_id = 0;
extern YYSTYPE yylval;
int lineNum = 0;

%}
digit  [0-9]
letter [a-zA-Z]
assignop  [=]
addop	[+-]
mulop	[*/%]

%%
if;
else;
while;
for;
repeat;
until;
return;
main; 
{letter}({letter}|{digit}|"_")?({letter}|{digit}|"_")?({letter}|{digit}|"_")?({letter}|{digit}|"_")?		{
	    int i;
	    int flag=0; 
	    for (i = 0; i<total_id; i++) {
		if (strcmp(identifier[i], yytext)==0)
		 {
		     flag=1;
		     break;
		 }
	    }
	        yylval.string = malloc(strlen(yytext)+1);
		strncpy(yylval.string, yytext, strlen(yytext));
			 
	    if(flag==0)	
	     {
			if(total_id==0) puts("");
			printf("\r%s\n", yylval.string);
			strcpy(identifier[total_id++],yylval.string);
		
	     } 
		return ID;
    }


{digit}+|({digit}+("."){digit}+)   	{yylval.value = atof(yytext); return NUM;}
"=="|">="|"<="|">"|"<"|"!="		{return RELOP;}
{addop}|("||") 				{return ADDOP;}
{mulop}|("&&") 				{return MULOP;}
"="					{return ASSIGN;}
";"					{return END;}
"!"					{return NOT;}
"["					{return SQRBO;}
"]"					{return SQRBC;}
"("					{return STRBO;}
")"					{return STRBC;}
"\n"				{lineNum++;}
[ \t]+;
%%

